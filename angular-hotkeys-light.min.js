!function(a){!function(a){a.module("fps.hotkeys",[]).service("Hotkeys",["$Hotkeys",function(a){return new a}]).provider("$Hotkeys",function(){function a(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}var b=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a){for(var b={},c=[],d=0;d<a.length;++d)b[a[d]]||c.push(a[d]),b[a[d]]=!0;return c},d=this.KEY_CODES={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"};this.$get=["$rootScope","$window",function(e,f){var g=function(a){return function(b,c){e.$apply(function(){a.call(this,b,c)}.bind(this))}},h=function(b){this.id=b.id||a(),this.key=b.key,this.context=b.context||null,this.callback=b.callback,this.args=b.args,this.onKeyUp=!1,this.preventIn=b.preventIn||[]};h.prototype.clone=function(){return new h(this)};var i=function(){this._hotkeys={},this._hotkeysUp={},this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this.initialize()};return Object.defineProperty(i.prototype,"initialize",{value:function(){f.addEventListener("keydown",this._onKeydown,!0),f.addEventListener("keyup",this._onKeyup,!0)}}),Object.defineProperty(i.prototype,"_shouldInvokeHandler",{value:function(a,b){var c=a.target||a.srcElement;if(!c||!c.nodeName)return!0;for(var d=c.nodeName.toUpperCase(),e=0;e<b.preventIn.length;e++)if(d===b.preventIn[e])return!1;return!0}}),Object.defineProperty(i.prototype,"_invokeHotkeyHandlers",{value:function(a,b,c){for(var d=0,e=c.length;d<e;d++)try{var f=c[d];this._shouldInvokeHandler(a,f)&&f.callback.call(f.context,a,f.args)}catch(g){console.error("HotKeys: ",f.key,g.message)}}}),Object.defineProperty(i.prototype,"_onKeydown",{value:function(a){var b=this.keyStringFromEvent(a);this._hotkeys[b]&&this._invokeHotkeyHandlers(a,b,this._hotkeys[b])},writable:!0}),Object.defineProperty(i.prototype,"_onKeyup",{value:function(a){var b=this.keyStringFromEvent(a);this._hotkeysUp[b]&&this._invokeHotkeyHandlers(this._hotkeysUp[b],b)},writable:!0}),Object.defineProperty(i.prototype,"keyStringFromEvent",{value:function(a){var b=[],e=a.which;return e=d[e]?d[e]:String.fromCharCode(e).toLowerCase(),a.ctrlKey&&b.push("ctrl"),a.altKey&&b.push("alt"),a.shiftKey&&b.push("shift"),a.metaKey&&b.push("meta"),b.push(e),c(b).join("+")}}),Object.defineProperty(i.prototype,"_deregisterHotkey",{value:function(a){var b,c=this._hotkeys;if(a.onKeyUp&&(c=this._hotkeysUp),c[a.key])for(var d=c[a.key],e=0;e<d.length;++e){var f=d[e];(a.callback===f.callback&&f.context===a.context||a.id===f.id)&&(b=d.splice(e,1))}return b}}),Object.defineProperty(i.prototype,"deregisterHotkey",{value:function(a){var c=[];if(this._validateHotkey(a),b(a.key))for(var d=a.key.length-1;d>=0;d--){var e=a.clone();e.key=a.key[d];var f=this._deregisterHotkey(e);void 0!==f&&c.push(f[0])}else c.push(this._deregisterHotkey(a));return c}}),Object.defineProperty(i.prototype,"_validateHotkey",{value:function(a){if(!(a instanceof h))throw new TypeError("Hotkeys: Expected a hotkey object be instance of HotKey")}}),Object.defineProperty(i.prototype,"_registerKey",{value:function(a){var b=this._hotkeys;return a.onKeyUp&&(b=this._hotkeysUp),b[a.key]=b[a.key]||[],b[a.key].push(a),a}}),Object.defineProperty(i.prototype,"_registerKeys",{value:function(c){var d=[];if(b(c.key))for(var e=c.key.length-1;e>=0;e--){var f=c.clone();f.id=a(),f.key=c.key[e],d.push(this._registerKey(f))}else d.push(this._registerKey(c));return d}}),Object.defineProperty(i.prototype,"registerHotkey",{value:function(a){return this._validateHotkey(a),this._registerKeys(a)}}),Object.defineProperty(i.prototype,"registerHotkeyUp",{value:function(a){this._validateHotkey(a),a.onKeyUp=!0,this._registerKeys(a)}}),Object.defineProperty(i.prototype,"createHotkey",{value:function(a){if(null===a.key||void 0===a.key)throw new TypeError('HotKeys: Argument "key" is required');if(null===a.callback||void 0===a.callback)throw new TypeError('HotKeys: Argument "callback" is required');return a.callback=g(a.callback),new h(a)}}),Object.defineProperty(i.prototype,"match",{value:function(a,c){b(c)||(c=[c]);var d=this.keyStringFromEvent(a);return Boolean(~c.indexOf(d))}}),i}]})}(window.angular)}(angular);
//# sourceMappingURL=angular-hotkeys-light.map.js